<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Be My Valentine?</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap');
        
        body {
            font-family: 'Nunito', sans-serif;
            overflow: hidden; /* Prevent scrolling when button moves */
        }

        /* Custom Confetti Animation */
        @keyframes fall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            animation: fall linear forwards;
            z-index: 50;
        }

        /* Smooth transitions for button movement */
        .btn-transition {
            transition: all 0.3s ease;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Data & Assets ---
        // Updated to use more reliable direct media.tenor.com links
        const STAGES = [
            {
                text: "Will you be my Valentine?",
                img: "https://media.tenor.com/I7kd3u3V_r8AAAAi/mochi-cat-peach.gif", // Happy jumping
                btnNo: "No"
            },
            {
                text: "Pretty please? ðŸ¥º",
                img: "https://media.tenor.com/7zK_pGj_sQIAAAAi/mochi-cat-pleading.gif", // Pleading
                btnNo: "Are you sure?"
            },
            {
                text: "My heart is breaking! ðŸ’”",
                img: "https://media.tenor.com/17XgQY4W_WAAAAAi/mochi-peach.gif", // Sad
                btnNo: "Don't do this"
            },
            {
                text: "Don't be cold as ice! ðŸ˜­",
                img: "https://media.tenor.com/bZ1kF6hWjJ0AAAAi/mochi-cat-crying.gif", // Crying
                btnNo: "Last chance!"
            },
            {
                text: "BE MY VALENTINE. OR ELSE. ðŸ”ª",
                img: "https://media.tenor.com/9sF_tWkS3cAAAAAi/mochi-cat-knife.gif", // Angry with knife
                btnNo: "O...Okay",
                isThreat: true
            }
        ];

        const SUCCESS_IMG = "https://media.tenor.com/T_m25VwO2OAAAAAi/peach-goma-love.gif"; // Kissing

        // --- Components ---

        const Confetti = () => {
            const [particles, setParticles] = useState([]);

            useEffect(() => {
                const colors = ['#ff0000', '#ff69b4', '#ffd700', '#00ff00', '#00bfff'];
                const particleCount = 100;
                const newParticles = [];

                for (let i = 0; i < particleCount; i++) {
                    newParticles.push({
                        id: i,
                        x: Math.random() * 100,
                        delay: Math.random() * 2,
                        duration: 2 + Math.random() * 3,
                        color: colors[Math.floor(Math.random() * colors.length)]
                    });
                }
                setParticles(newParticles);
            }, []);

            return (
                <div className="fixed inset-0 pointer-events-none overflow-hidden">
                    {particles.map(p => (
                        <div
                            key={p.id}
                            className="confetti"
                            style={{
                                left: `${p.x}%`,
                                top: -20,
                                backgroundColor: p.color,
                                animationDuration: `${p.duration}s`,
                                animationDelay: `${p.delay}s`
                            }}
                        />
                    ))}
                </div>
            );
        };

        const App = () => {
            const [noCount, setNoCount] = useState(0);
            const [yesPressed, setYesPressed] = useState(false);
            const [noBtnPosition, setNoBtnPosition] = useState({ top: null, left: null });
            
            // Limit stages to the length of the array
            const currentStageIndex = Math.min(noCount, STAGES.length - 1);
            const currentStage = STAGES[currentStageIndex];
            const isThreatMode = currentStage.isThreat;

            // Calculate Yes button scale (grows 20% each time)
            const yesScale = 1 + (noCount * 0.2);
            
            // Calculate No button scale (shrinks 20% each time)
            const noScale = Math.max(0.1, 1 - (noCount * 0.2));

            const handleNoClick = () => {
                setNoCount(noCount + 1);
                moveNoButton();
            };

            const moveNoButton = () => {
                // Get random X and Y, accounting for button size (approx 100px) and padding
                const x = Math.random() * (window.innerWidth - 100);
                const y = Math.random() * (window.innerHeight - 50);
                setNoBtnPosition({ top: y, left: x });
            };

            const handleYesClick = () => {
                setYesPressed(true);
            };

            // Dynamic Background Styles
            const bgClass = isThreatMode 
                ? "bg-slate-900" 
                : "bg-gradient-to-br from-pink-200 via-red-200 to-pink-300";
            
            const cardClass = isThreatMode
                ? "bg-slate-800 border-2 border-red-600 shadow-[0_0_20px_rgba(220,38,38,0.5)] text-red-500"
                : "bg-white/80 backdrop-blur-sm border border-white shadow-xl text-pink-600";

            // --- Success View ---
            if (yesPressed) {
                return (
                    <div className={`flex flex-col items-center justify-center min-h-screen ${bgClass} transition-colors duration-500`}>
                        <Confetti />
                        <div className="text-center animate-bounce z-10 p-5">
                            <img 
                                src={SUCCESS_IMG} 
                                alt="Kissing Cats" 
                                className="h-64 mx-auto rounded-lg shadow-lg mb-8"
                                onError={(e) => {
                                    e.target.onerror = null; 
                                    e.target.src = "https://media.tenor.com/MVP14J9Yt14AAAAi/mochi-cat.gif";
                                }}
                            />
                            <h1 className="text-4xl md:text-6xl font-black text-pink-600 drop-shadow-md">
                                YAY!!! ðŸ’–
                            </h1>
                            <p className="text-xl md:text-2xl mt-4 font-bold text-pink-500">
                                I knew you would say yes!
                            </p>
                        </div>
                    </div>
                );
            }

            // --- Proposal View ---
            return (
                <div className={`flex flex-col items-center justify-center min-h-screen p-4 overflow-hidden relative ${bgClass} transition-colors duration-700`}>
                    
                    <div className={`relative z-10 max-w-md w-full p-8 rounded-3xl text-center btn-transition ${cardClass}`}>
                        
                        <img 
                            src={currentStage.img} 
                            alt="Reaction Cat" 
                            className="h-48 mx-auto mb-6 rounded-xl object-contain"
                            onError={(e) => {
                                e.target.onerror = null; 
                                e.target.src = "https://media.tenor.com/MVP14J9Yt14AAAAi/mochi-cat.gif"; // Fallback to generic happy cat
                            }}
                        />
                        
                        <h1 className={`text-3xl font-extrabold mb-8 ${isThreatMode ? 'text-red-600 tracking-widest uppercase' : 'text-pink-600'}`}>
                            {currentStage.text}
                        </h1>

                        <div className="flex items-center justify-center gap-4 relative h-16">
                            
                            {/* YES BUTTON */}
                            <button
                                onClick={handleYesClick}
                                style={{ transform: `scale(${yesScale})` }}
                                className={`
                                    btn-transition
                                    px-8 py-3 rounded-full font-bold text-white shadow-lg
                                    ${isThreatMode 
                                        ? 'bg-red-600 hover:bg-red-700 ring-4 ring-red-900' 
                                        : 'bg-green-500 hover:bg-green-600'
                                    }
                                `}
                            >
                                YES
                            </button>

                            {/* NO BUTTON */}
                            <button
                                onClick={handleNoClick}
                                onMouseEnter={noCount > 0 ? moveNoButton : undefined} // Moves on hover for desktop after 1st click
                                style={{
                                    transform: `scale(${noScale})`,
                                    position: noBtnPosition.top !== null ? 'fixed' : 'static',
                                    top: noBtnPosition.top,
                                    left: noBtnPosition.left,
                                }}
                                className={`
                                    btn-transition
                                    px-8 py-3 rounded-full font-bold text-white shadow-lg
                                    whitespace-nowrap z-50
                                    ${isThreatMode 
                                        ? 'bg-gray-700 hover:bg-gray-800 text-gray-400' 
                                        : 'bg-red-400 hover:bg-red-500'
                                    }
                                `}
                            >
                                {currentStage.btnNo}
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>


